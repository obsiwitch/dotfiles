#!/bin/bash

flags=()
if lsmod | grep -q nvidia; then
    flags+=('--unsupported-gpu')

    # disable explicit sync to fix stuttering/flickering in games
    # ref: https://github.com/swaywm/sway/issues/8755
    export WLR_RENDER_NO_EXPLICIT_SYNC=1
fi
exec /usr/bin/sway "${flags[@]}" "$@"
